<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat v·ªõi c√°n b·ªô t∆∞ v·∫•n</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        background-color: #f4f4f4;
        height: 100vh;
        overflow: auto;
      }

      #chat-bubble {
        width: 60px;
        height: 60px;
        background-color: #ff6f00;
        color: white;
        position: fixed;
        bottom: 80px; /* Ch·ªânh l·∫°i v·ªã tr√≠ c·ªßa chat bubble */
        left: 20px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        font-size: 24px;
        z-index: 9999; /* ƒê·∫£m b·∫£o chat bubble ·ªü tr√™n c√°c ph·∫ßn t·ª≠ kh√°c */
      }

      /* Chatbox */
      #chatbox {
        width: 400px;
        height: 600px;
        position: fixed;
        bottom: 20px;
        left: 20px;
        background-color: white;
        border-radius: 10px;
        border: 1px solid #ccc;
        display: none; /* ·∫®n chatbox m·∫∑c ƒë·ªãnh */
        flex-direction: column;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      #chatbox-header {
        background-color: #ff6f00;
        color: white;
        padding: 10px;
        font-size: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-radius: 10px 10px 0 0;
      }

      #chatbox-header img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
      }

      #chatbox-header .title {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      #close-chat {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
      }

      #messages {
        flex-grow: 1;
        padding: 10px;
        overflow-y: auto;
        border-bottom: 1px solid #ccc;
      }

      #input-area {
        display: flex;
        align-items: center;
        padding: 10px;
        gap: 5px;
      }

      #input-area input[type="text"] {
        flex-grow: 1;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 14px;
      }

      #input-area button {
        padding: 10px;
        background-color: #ff6f00;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      #input-area button:hover {
        background-color: #e66000;
      }

      .message {
        margin-bottom: 10px;
        padding: 5px;
        border-radius: 5px;
        max-width: 80%;
      }

      .user {
        background-color: #f4f4f4;
        margin-left: auto;
      }

      .bot {
        background-color: #ffe0b2;
        margin-right: auto;
      }

      .timestamp {
        font-size: 12px;
        color: gray;
        text-align: right;
        margin-top: -5px;
      }

      .option {
        padding: 10px;
        background-color: #ff6f00;
        color: white;
        border: none;
        border-radius: 5px;
        text-align: center;
        cursor: pointer;
        margin-bottom: 5px;
      }

      .option:hover {
        background-color: #e66000;
      }
    </style>
  </head>
  <body>
    <!-- Bong b√≥ng chat -->
    <div id="chat-bubble">üí¨</div>

    <!-- C·ª≠a s·ªï chat -->
    <div id="chatbox">
      <div id="chatbox-header">
        <div class="title">
          {% load static %}
          <img
            class="logo"
            src="{% static 'app/images/FPT.png' %}"
            alt="Logo Tr∆∞·ªùng"
          />
          <div>
            <strong>Tr∆∞·ªùng THPT FPT</strong><br />
            C√°n b·ªô nh√† tr∆∞·ªùng lu√¥n s·∫µn s√†ng t∆∞ v·∫•n th√¥ng tin cho qu√Ω v·ªã! Xin h√£y
            ƒë·ªÉ l·∫°i l·ªùi nh·∫Øn.
          </div>
        </div>
        <button id="close-chat">√ó</button>
      </div>
      <div id="messages">
        <div class="message bot">
          C√°n b·ªô t∆∞ v·∫•n: Anh/Ch·ªã ƒëang quan t√¢m ƒë·∫øn:
          <div class="timestamp" id="timestamp-init"></div>
        </div>
      </div>
      <div id="options">
        <button
          class="option"
          data-response="Ch∆∞∆°ng tr√¨nh h·ªçc c·ªßa THPT FPT c√≥ nh·ªØng ƒë·∫∑c ƒëi·ªÉm sau:
- Ch∆∞∆°ng tr√¨nh ch√≠nh kh√≥a: ch∆∞∆°ng tr√¨nh vƒÉn ho√° theo chu·∫©n c·ªßa B·ªô Gi√°o d·ª•c v√† ƒê√†o t·∫°o.
- Ch∆∞∆°ng tr√¨nh ti·∫øng Anh qu·ªëc t·∫ø v·ªõi gi√°o tr√¨nh c·ªßa NXB ƒê·∫°i h·ªçc Oxford (Anh)..."
        >
          Ch∆∞∆°ng tr√¨nh ƒë√†o t·∫°o
        </button>
        <button
          class="option"
          data-response="Nh√† tr∆∞·ªùng g·ª≠i Anh/Ch·ªã h·ªçc ph√≠:
L·ªõp 10 nƒÉm h·ªçc 2024 - 2025: 33.500.000 VNƒê/k·ª≥..."
        >
          H·ªçc ph√≠
        </button>
        <button
          class="option"
          data-response="Tr∆∞·ªùng THPT FPT l√† tr∆∞·ªùng h·ªçc n·ªôi tr√∫ ·ªü khu c√¥ng ngh·ªá cao Ho√† L·∫°c, Th·∫°ch Th·∫•t, H√† N·ªôi."
        >
          ƒê·ªãa ch·ªâ
        </button>
        <button
          class="option"
          data-response="NƒÉm h·ªçc 2024 - 2025, tr∆∞·ªùng THPT FPT tuy·ªÉn sinh b·∫±ng h√¨nh th·ª©c x√©t tuy·ªÉn:
      
      1. X√©t h·ªçc b·∫°:
         - ƒêi·ªÉm trung b√¨nh c·∫£ nƒÉm l·ªõp 9 t·ª´ 6.5 tr·ªü l√™n.
         - ƒê·∫°t h·∫°nh ki·ªÉm kh√° tr·ªü l√™n.
      
      2. X√©t ƒëi·ªÉm thi v√†o l·ªõp 10 c·ªßa t·ªânh/th√†nh ph·ªë:
         - T·ªïng ƒëi·ªÉm c√°c m√¥n x√©t tuy·ªÉn ƒë·∫°t y√™u c·∫ßu theo t·ª´ng khu v·ª±c.
      
      3. H·ªçc b·ªïng:
         - H·ªçc sinh c√≥ th√†nh t√≠ch xu·∫•t s·∫Øc c√≥ c∆° h·ªôi nh·∫≠n h·ªçc b·ªïng t·ª´ 30% - 100% h·ªçc ph√≠.
         - Ti√™u ch√≠ x√©t h·ªçc b·ªïng d·ª±a tr√™n ƒëi·ªÉm s·ªë, nƒÉng l·ª±c ƒë·∫∑c bi·ªát v√† ph·ªèng v·∫•n tr·ª±c ti·∫øp.
      
      Th·ªùi gian tuy·ªÉn sinh: T·ª´ th√°ng 3 ƒë·∫øn th√°ng 8 nƒÉm 2024.
      
      Li√™n h·ªá ngay ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n chi ti·∫øt."
        >
          Ph∆∞∆°ng th·ª©c tuy·ªÉn sinh
        </button>

        <button
          class="option"
          data-response="Th√¥ng tin v·ªÅ m√¥i tr∆∞·ªùng h·ªçc t·∫≠p v√† n·ªôi tr√∫ bao g·ªìm:
- K√Ω t√∫c x√° hi·ªán ƒë·∫°i, ƒë·∫ßy ƒë·ªß ti·ªán nghi.
- ƒê·ªôi ng≈© c√°n b·ªô qu·∫£n l√Ω th√¢n thi·ªán, nhi·ªát t√¨nh h·ªó tr·ª£."
        >
          M√¥i tr∆∞·ªùng h·ªçc t·∫≠p v√† n·ªôi tr√∫
        </button>
      </div>
      <div id="input-area">
        <input
          type="text"
          id="user-input"
          placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n..."
        />
        <button id="send-btn">G·ª≠i</button>
      </div>
    </div>

    <script>
      const chatBubble = document.getElementById("chat-bubble");
      const chatbox = document.getElementById("chatbox");
      const closeChat = document.getElementById("close-chat");
      const messagesContainer = document.getElementById("messages");
      const userInput = document.getElementById("user-input");
      const sendBtn = document.getElementById("send-btn");
      const options = document.querySelectorAll(".option");
      const timestampInit = document.getElementById("timestamp-init");

      chatBubble.addEventListener("click", () => {
        chatbox.style.display = "flex";
        chatBubble.style.display = "none";
        timestampInit.innerText = getCurrentTime();
      });

      closeChat.addEventListener("click", () => {
        chatbox.style.display = "none";
        chatBubble.style.display = "flex";
      });

      sendBtn.addEventListener("click", handleUserMessage);
      userInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") handleUserMessage();
      });

      options.forEach((option) => {
        option.addEventListener("click", () => {
          displayMessage(option.innerText, "user");

          // L·∫•y n·ªôi dung ph·∫£n h·ªìi t·ª´ data-response
          const botResponse = option.getAttribute("data-response");

          // Hi·ªÉn th·ªã tin nh·∫Øn bot v√† gi·ªØ nguy√™n format HTML
          displayBotMessage(botResponse);
        });
      });

      function handleUserMessage() {
        const userMessage = userInput.value.trim();
        if (userMessage) {
          displayMessage(userMessage, "user");
          displayBotMessage(
            `Vui l√≤ng truy c·∫≠p v√†o ƒë∆∞·ªùng link ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£: <a href='http://127.0.0.1:8000/lienhe/' target='_blank' style='color: blue; text-decoration: underline;'>http://127.0.0.1:8000/lienhe/</a>`
          );
          userInput.value = "";
        }
      }

      function displayMessage(text, sender) {
        const message = document.createElement("div");
        message.classList.add("message", sender);
        message.innerText = text;

        const timestamp = document.createElement("div");
        timestamp.classList.add("timestamp");
        timestamp.innerText = getCurrentTime();

        message.appendChild(timestamp);
        messagesContainer.appendChild(message);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }

      function displayBotMessage(text) {
        const botMessage = document.createElement("div");
        botMessage.classList.add("message", "bot");

        // D√πng innerHTML ƒë·ªÉ gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng HTML c·ªßa text
        botMessage.innerHTML = text;

        messagesContainer.appendChild(botMessage);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }

      function getCurrentTime() {
        const now = new Date();
        return now.toLocaleTimeString("vi-VN", {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });
      }
    </script>
  </body>
</html>
